//=============================================================================
//
// オブジェクトクラス [object.cpp]
// Author : AYANO KUDO
//
//=============================================================================
#include "object.h"
#include "manager.h"
#include "renderer.h"
#include "keyboard.h"
#include "game.h"
#include "player.h"
#include "enemy.h"
#include "file.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************
#define MODEL_PATH "./data/Models/cat V1.x"    //モデルのパス

//*****************************************************************************
// 静的メンバ変数宣言
//*****************************************************************************
int CObject::ObjctNum = 0;
CModel *CObject::pModel[MAX_OBJECT] = {};

//=============================================================================
// [CObject] コンストラクタ
//=============================================================================
CObject::CObject()
{
    ObjctNum = 0;
}

//=============================================================================
// [~CObject] デストラクタ
//=============================================================================
CObject::~CObject()
{

}

//=============================================================================
// [Create] オブジェクトの生成
//=============================================================================
CObject * CObject::Create(D3DXVECTOR3 pos)
{
    CObject *pObject = NULL;
    if (!pObject)
    {
        pObject = new CObject;
        pObject->Init();
        // 各値の代入・セット
    }
    return pObject;
}

//=============================================================================
// [Load] テクスチャの読み込み
//=============================================================================
HRESULT CObject::Load(void)
{
    return S_OK;
}

//=============================================================================
// [Unload] テクスチャの破棄
//=============================================================================
void CObject::Unload(void)
{

}

//=============================================================================
// [Init] 初期化処理
//=============================================================================
HRESULT CObject::Init(void)
{

    return S_OK;
}

//=============================================================================
// [Uninit] 終了処理
//=============================================================================
void CObject::Uninit(void)
{

}

//=============================================================================
// [Update] 更新処理
//=============================================================================
void CObject::Update(void)
{
    // オブジェクトの配置
    SetObject();
}

//=============================================================================
// [Draw] 描画処理
//=============================================================================
void CObject::Draw(void)
{

}
//=============================================================================
// [SetObject] オブジェクトの配置
// Author : AYANO KUDO
//=============================================================================
void CObject::SetObject(void)
{
    if (CManager::GetKeyboard()->GetKeyTrigger(DIK_SPACE))
    {
        // 現在の位置にオブジェクトの配置をする
        for (int nCnt = 0; nCnt < MAX_OBJECT; nCnt++)
        {
            if (pModel[nCnt] == NULL)
            {
                pModel[nCnt] = CEnemy::Create(CGame::GetPlayer()->GetPos());
                break;// 一体ずつ配置するためにループを抜ける
            }
        }

    }
    if (CManager::GetKeyboard()->GetKeyTrigger(DIK_F1))
    {
        CFile::Writing();
    }
}